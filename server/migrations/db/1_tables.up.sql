CREATE TABLE `external_data`
(
    `guid`         text NOT NULL,
    `user_id`      integer,
    `team_id`      integer,
    `username`     text,
    `teamname`     text,

    `loc_x`        real NULL,
    `loc_y`        real NULL,
    `loc_rotation` real NULL,
    `host_id`      text NULL,

    PRIMARY KEY ('guid')
);

CREATE UNIQUE INDEX idx_dj_unique_team ON external_data (`team_id`);
CREATE INDEX idx_dj_host ON external_data (`host_id`);

CREATE table `hosts`
(
    `guid`        text NOT NULL,
    `data`        text NOT NULL,
    `hostname`    text NOT NULL,
    `primary_ip`  text NOT NULL,
    `primary_mac` text NOT NULL,
    `last_seen`   datetime,

    PRIMARY KEY (`guid`)
);

CREATE UNIQUE INDEX idx_guid_unique ON hosts (`guid`);
-- CREATE INDEX idx_hosts ON external_data (`host_id`);

CREATE table `settings`
(
    `key`   text not null,
    `value` text,

    PRIMARY KEY (`key`)
);

CREATE table `problems`
(
    `id`    text NOT NULL,
    `rgb`   text NULL,
    `loc_x` real null,
    `loc_y` real null,

    PRIMARY KEY (`id`)
);

insert into settings
values ('contest', 'nwerc18');
--       ('map',
--        '{"table_width":1.8,"table_depth":0.8,"team_area_width":2.8,"team_area_depth":2.0,"aisles":[{"x1":71.2,"y1":7.5,"x2":71.2,"y2":30.83},{"x1":0.0,"y1":7.5,"x2":0.0,"y2":30.83},{"x1":0.0,"y1":7.5,"x2":71.2,"y2":7.5},{"x1":0.0,"y1":30.83,"x2":71.2,"y2":30.83},{"x1":55.2,"y1":30.83,"x2":55.2,"y2":38.33},{"x1":57.4,"y1":32.33,"x2":57.4,"y2":38.33},{"x1":59.6,"y1":32.33,"x2":59.6,"y2":38.33},{"x1":61.8,"y1":32.33,"x2":61.8,"y2":38.33},{"x1":64.0,"y1":32.33,"x2":64.0,"y2":38.33},{"x1":66.2,"y1":32.33,"x2":66.2,"y2":38.33},{"x1":68.4,"y1":30.83,"x2":68.4,"y2":38.33},{"x1":55.2,"y1":33.83,"x2":68.4,"y2":33.83},{"x1":55.2,"y1":36.83,"x2":68.4,"y2":36.83},{"x1":36.8,"y1":30.83,"x2":36.8,"y2":38.33},{"x1":39.0,"y1":32.33,"x2":39.0,"y2":38.33},{"x1":41.2,"y1":32.33,"x2":41.2,"y2":38.33},{"x1":43.4,"y1":32.33,"x2":43.4,"y2":38.33},{"x1":45.6,"y1":32.33,"x2":45.6,"y2":38.33},{"x1":47.8,"y1":32.33,"x2":47.8,"y2":38.33},{"x1":50.0,"y1":30.83,"x2":50.0,"y2":38.33},{"x1":36.8,"y1":33.83,"x2":50.0,"y2":33.83},{"x1":36.8,"y1":36.83,"x2":50.0,"y2":36.83},{"x1":18.4,"y1":30.83,"x2":18.4,"y2":35.33},{"x1":20.6,"y1":32.33,"x2":20.6,"y2":35.33},{"x1":22.8,"y1":32.33,"x2":22.8,"y2":35.33},{"x1":25.0,"y1":32.33,"x2":25.0,"y2":35.33},{"x1":27.2,"y1":32.33,"x2":27.2,"y2":35.33},{"x1":29.4,"y1":32.33,"x2":29.4,"y2":35.33},{"x1":31.6,"y1":30.83,"x2":31.6,"y2":35.33},{"x1":18.4,"y1":33.83,"x2":31.6,"y2":33.83},{"x1":0.0,"y1":30.83,"x2":0.0,"y2":35.33},{"x1":2.2,"y1":32.33,"x2":2.2,"y2":35.33},{"x1":4.4,"y1":32.33,"x2":4.4,"y2":35.33},{"x1":6.6,"y1":32.33,"x2":6.6,"y2":35.33},{"x1":8.8,"y1":32.33,"x2":8.8,"y2":35.33},{"x1":11.0,"y1":32.33,"x2":11.0,"y2":35.33},{"x1":13.2,"y1":30.83,"x2":13.2,"y2":35.33},{"x1":0.0,"y1":33.83,"x2":13.2,"y2":33.83},{"x1":2.2,"y1":3.0,"x2":2.2,"y2":7.5},{"x1":4.4,"y1":3.0,"x2":4.4,"y2":6.0},{"x1":6.6,"y1":3.0,"x2":6.6,"y2":6.0},{"x1":8.8,"y1":3.0,"x2":8.8,"y2":6.0},{"x1":11.0,"y1":3.0,"x2":11.0,"y2":6.0},{"x1":13.2,"y1":3.0,"x2":13.2,"y2":6.0},{"x1":15.4,"y1":3.0,"x2":15.4,"y2":7.5},{"x1":2.2,"y1":4.5,"x2":15.4,"y2":4.5},{"x1":20.6,"y1":3.0,"x2":20.6,"y2":7.5},{"x1":22.8,"y1":3.0,"x2":22.8,"y2":6.0},{"x1":25.0,"y1":3.0,"x2":25.0,"y2":6.0},{"x1":27.2,"y1":3.0,"x2":27.2,"y2":6.0},{"x1":29.4,"y1":3.0,"x2":29.4,"y2":6.0},{"x1":31.6,"y1":3.0,"x2":31.6,"y2":6.0},{"x1":33.8,"y1":3.0,"x2":33.8,"y2":7.5},{"x1":20.6,"y1":4.5,"x2":33.8,"y2":4.5},{"x1":39.0,"y1":0.0,"x2":39.0,"y2":7.5},{"x1":41.2,"y1":0.0,"x2":41.2,"y2":6.0},{"x1":43.4,"y1":0.0,"x2":43.4,"y2":6.0},{"x1":45.6,"y1":0.0,"x2":45.6,"y2":6.0},{"x1":47.8,"y1":0.0,"x2":47.8,"y2":6.0},{"x1":50.0,"y1":0.0,"x2":50.0,"y2":6.0},{"x1":52.2,"y1":0.0,"x2":52.2,"y2":7.5},{"x1":39.0,"y1":1.5,"x2":52.2,"y2":1.5},{"x1":39.0,"y1":4.5,"x2":52.2,"y2":4.5},{"x1":57.4,"y1":0.0,"x2":57.4,"y2":7.5},{"x1":59.6,"y1":0.0,"x2":59.6,"y2":6.0},{"x1":61.8,"y1":0.0,"x2":61.8,"y2":6.0},{"x1":64.0,"y1":0.0,"x2":64.0,"y2":6.0},{"x1":66.2,"y1":0.0,"x2":66.2,"y2":6.0},{"x1":68.4,"y1":0.0,"x2":68.4,"y2":6.0},{"x1":70.6,"y1":0.0,"x2":70.6,"y2":7.5},{"x1":57.4,"y1":1.5,"x2":70.6,"y2":1.5},{"x1":57.4,"y1":4.5,"x2":70.6,"y2":4.5}],"printer":{"x":16.9,"y":8.5}}'),
--       ('problems',
--        '[{"id":"A","location":{"x":72.2,"y":9.17}},{"id":"B","location":{"x":72.2,"y":10.83}},{"id":"C","location":{"x":72.2,"y":12.5}},{"id":"D","location":{"x":72.2,"y":14.17}},{"id":"E","location":{"x":72.2,"y":15.83}},{"id":"F","location":{"x":72.2,"y":17.5}},{"id":"G","location":{"x":72.2,"y":19.17}},{"id":"H","location":{"x":72.2,"y":20.83}},{"id":"I","location":{"x":72.2,"y":22.5}},{"id":"J","location":{"x":72.2,"y":24.17}},{"id":"K","location":{"x":72.2,"y":25.83}},{"id":"L","location":{"x":72.2,"y":27.5}},{"id":"M","location":{"x":72.2,"y":29.17}}]');
